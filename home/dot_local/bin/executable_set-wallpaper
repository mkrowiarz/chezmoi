#!/bin/bash
set -euo pipefail

if [ -z "${1:-}" ]; then
    echo "Usage: set-wallpaper <path-to-image>"
    exit 1
fi

image="$(realpath "$1")"
swww img "$image" && matugen image "$image" && cp "$image" ~/.config/background.png
hyprctl reload >/dev/null
killall waybar 2>/dev/null; waybar &>/dev/null &disown
killall dunst 2>/dev/null; dunst &>/dev/null &disown
chezmoi add ~/.config/hypr/conf/colors.conf ~/.config/hypr/hyprlock.conf ~/.config/hypr/hyprtoolkit.conf
